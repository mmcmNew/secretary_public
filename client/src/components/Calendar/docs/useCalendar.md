# useCalendar

## Описание

`useCalendar` - это кастомный React хук, который инкапсулирует всю бизнес-логику календаря. Он предоставляет данные и функции, необходимые для работы компонентов календаря, включая управление событиями, задачами, настройками и синхронизацией данных.

## Взаимодействие компонентов

`useCalendar` взаимодействует со следующими компонентами и хуками:
- `TasksContext` - для получения данных о задачах, списках и полях задач
- `useCalendarSync` - для синхронизации данных календаря
- `useContainer` - для управления контейнером

## Задачи хука

1. Предоставление данных календаря (события, задачи, списки, настройки)
2. Предоставление функций для работы с календарем (создание, изменение, удаление событий и задач)
3. Управление синхронизацией данных календаря
4. Обработка пользовательских действий с календарем
5. Интеграция с контекстом задач для получения актуальных данных

## Зоны ответственности

- Управление данными календаря
- Обработка бизнес-логики календаря
- Синхронизация данных календаря
- Интеграция с контекстом задач
- Обработка ошибок и уведомлений

## Параметры

| Название | Тип | Обязательный | Описание |
|----------|-----|-------------|----------|
| `onSuccess` | `function` | Нет | Функция для обработки успешных операций |
| `onError` | `function` | Нет | Функция для обработки ошибок |

## Возвращаемые значения

Хук возвращает объект со следующими свойствами:

### Refs
| Название | Тип | Описание |
|----------|-----|----------|
| `calendarRef` | `object` | Ref для доступа к API календаря |

### Данные
| Название | Тип | Описание |
|----------|-----|----------|
| `tasks` | `array` | Массив задач |
| `lists` | `object` | Объект со списками задач |
| `taskFields` | `object` | Объект с описанием полей задачи |
| `calendarEvents` | `array` | Массив событий календаря |
| `calendarUIState` | `object` | Объект с состоянием UI календаря |
| `calendarSettings` | `object` | Объект с настройками календаря |

### Функции
| Название | Тип | Описание |
|----------|-----|----------|
| `fetchTasks` | `function` | Функция для получения подзадач |
| `fetchCalendarEvents` | `function` | Функция для получения событий календаря |
| `handleCreateTask` | `function` | Функция для создания новой задачи |
| `handleEventClick` | `function` | Функция для обработки клика по событию |
| `handleEventChange` | `function` | Функция для обработки изменения события |
| `handleDelDateClick` | `function` | Функция для удаления даты задачи |
| `handleDialogClose` | `function` | Функция для закрытия диалога |
| `handleOverrideChoice` | `function` | Функция для обработки выбора экземпляра повторяющегося события |
| `handleSaveSettings` | `function` | Функция для сохранения настроек календаря |
| `setOverrideSnackbar` | `function` | Функция для установки состояния snackbar |
| `getCalendarRange` | `function` | Функция для получения диапазона календаря |
| `changeInstanceStatus` | `function` | Функция для изменения статуса экземпляра задачи |
| `handleTaskChange` | `function` | Функция для изменения задачи |
| `handleInstanceChange` | `function` | Функция для изменения экземпляра задачи |
| `handleDeleteTaskDate` | `function` | Функция для удаления даты задачи |
| `handleDeleteInstanceDate` | `function` | Функция для удаления даты экземпляра задачи |
| `addSubTask` | `function` | Функция для добавления подзадачи |
| `changeTaskStatus` | `function` | Функция для изменения статуса задачи |
| `deleteTask` | `function` | Функция для удаления задачи |
| `addEvent` | `function` | Функция для добавления события |
| `updateEvent` | `function` | Функция для обновления события |
| `deleteEvent` | `function` | Функция для удаления события |
| `patchInstance` | `function` | Функция для обновления экземпляра события |
| `handleWebSocketUpdate` | `function` | Функция для обработки обновлений через WebSocket |