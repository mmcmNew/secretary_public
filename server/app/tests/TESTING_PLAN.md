# План тестирования серверных маршрутов задач

## Общая информация

Этот документ описывает план тестирования для всех серверных маршрутов задач в приложении. Тесты будут написаны с использованием фреймворка pytest и будут использовать реальную базу данных для тестирования.

## Структура тестов

Тесты будут организованы по следующим категориям:

1. Тесты для маршрутов списков и групп
2. Тесты для маршрутов задач
3. Тесты для маршрутов типов задач
4. Тесты для маршрутов календаря

## Общие принципы тестирования

1. Каждый маршрут будет протестирован на:
   - Успешное выполнение при корректных данных
   - Корректную обработку ошибок при некорректных данных
   - Правильное взаимодействие с базой данных
   - Корректную работу с системой аутентификации

2. Для тестирования будут использоваться:
   - Фикстуры pytest для настройки тестового окружения
   - Mock-объекты для внешних зависимостей, когда это необходимо
   - Реальная база данных для проверки корректности операций

## Маршруты для тестирования

### Основные маршруты задач

1. `GET /tasks/get_lists` - Получение списков и групп
2. `POST /tasks/add_list` - Добавление объекта (списка/группы/проекта)
3. `POST /tasks/add_task` - Добавление задачи
4. `PUT /tasks/edit_list` - Редактирование списка/группы/проекта
5. `POST /tasks/add_subtask` - Добавление подзадачи
6. `PUT /tasks/edit_task` - Редактирование задачи
7. `PUT /tasks/change_status` - Изменение статуса задачи
8. `GET /tasks/get_tasks` - Получение задач
9. `GET /tasks/get_tasks_by_ids` - Получение задач по ID
10. `DELETE /tasks/del_task` - Удаление задачи
12. `DELETE /tasks/delete_from_childes` - Удаление из дочерних элементов
13. `PUT /tasks/link_task` - Связывание задачи
14. `GET /tasks/fields_config` - Получение конфигурации полей
15. `GET /tasks/get_subtasks` - Получение подзадач

### Маршруты типов задач

16. `GET /tasks/task_type_groups` - Получение групп типов задач
17. `POST /tasks/task_type_groups` - Создание группы типов задач
18. `PUT /tasks/task_type_groups/<int:group_id>` - Обновление группы типов задач
19. `DELETE /tasks/task_type_groups/<int:group_id>` - Удаление группы типов задач
20. `GET /tasks/task_types` - Получение типов задач
21. `POST /tasks/task_types` - Создание типа задачи
22. `PUT /tasks/task_types/<int:type_id>` - Обновление типа задачи
23. `DELETE /tasks/task_types/<int:type_id>` - Удаление типа задачи

### Маршруты календаря

24. `GET /tasks/get_calendar_events` - Получение событий календаря
25. `PATCH /tasks/instance` - Обновление экземпляра задачи

## Формат результатов тестов

Результаты тестов будут сохраняться в формате JSON с следующей структурой:

```json
{
  "test_results": {
    "route_name": {
      "status": "passed|failed|skipped",
      "details": "Описание результата теста",
      "execution_time": "Время выполнения в секундах"
    }
  },
  "summary": {
    "total": 0,
    "passed": 0,
    "failed": 0,
    "skipped": 0
  }
}
```

Этот формат позволит легко интегрировать результаты тестов в клиентские тесты.

## Скрипты для запуска тестов

Будет создан скрипт для запуска всех тестов и сохранения результатов в файл:

```bash
python -m pytest server/app/tests/ --json-report --json-report-file=server/app/tests/test_results.json