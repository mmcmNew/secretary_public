import{m as e,e as n,p as t}from"./index-C5hAknqr.js";import{v as a,S as i}from"./index-CWWusv4C.js";import{w as l}from"./index-DlJMGLAz.js";const r=["pre","script","style","textarea"],o={};function s(e,n){return Boolean(n&&"element"===n.type&&e.blanks.length>0&&e.blanks.includes(n.tagName))}function d(e,a){return"root"===a.type||"element"===a.type&&(e.head||"script"===a.tagName||n(a)||!t(a))}function p(n){return function(t){!function(n,t){const p=t||o,u={blanks:p.blanks||[],head:!1,indentInitial:!1!==p.indentInitial,indent:"number"==typeof p.indent?" ".repeat(p.indent):"string"==typeof p.indent?p.indent:"  "};function c(e,n,t){const a=e[e.length-1],i=a&&l(a)?e[e.length-2]:a,r=(s(u,i)&&s(u,t)?"\n\n":"\n")+u.indent.repeat(Math.max(n,0));a&&"text"===a.type?a.value=l(a)?r:a.value+r:e.push({type:"text",value:r})}e(n,{newlines:!0}),a(n,(function(e,n){if(!("children"in e))return;if("element"===e.type&&"head"===e.tagName&&(u.head=!0),u.head&&"element"===e.type&&"body"===e.tagName&&(u.head=!1),"element"===e.type&&r.includes(e.tagName))return i;if(0===e.children.length||!d(u,e))return;let t=n.length;u.indentInitial||t--;let a=!1;for(const i of e.children)"comment"!==i.type&&"text"!==i.type||(i.value.includes("\n")&&(a=!0),i.value=i.value.replace(/ *\n/g,"$&"+u.indent.repeat(t)));const o=[];let s;for(const i of e.children)(d(u,i)||a&&!s)&&(c(o,t,i),a=!0),s=i,o.push(i);s&&(a||d(u,s))&&(l(s)&&(o.pop(),s=o[o.length-1]),c(o,t-1)),e.children=o}))}(t,n)}}export{p as default};
