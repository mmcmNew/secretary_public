import{e as t}from"./index-CVGu1eJ_.js";import{p as e}from"./index-CRDIb5s8.js";import{v as n,E as r,S as o}from"./index-CY0uRKbK.js";import{t as i}from"./index-Ck87fAyN.js";import"./mui-Y8rtTM8Z.js";const l=function(t,e,n,r,o){const i=c(e);return!(!t||!t.type||"string"!=typeof t.type)&&i.call(o,t,n,r)},c=function(t){if(null==t)return a;if("string"==typeof t)return function(t){return e;function e(e){return a(e)&&e.tagName===t}}(t);if("object"==typeof t)return function(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=c(t[n]);return u(r);function r(...t){let n=-1;for(;++n<e.length;)if(e[n].call(this,...t))return!0;return!1}}(t);if("function"==typeof t)return u(t);throw new Error("Expected function, string, or array as test")};function u(t){return function(e,...n){return a(e)&&Boolean(t.call(this,e,...n))}}function a(t){return Boolean(t&&"object"==typeof t&&"element"===t.type&&"string"==typeof t.tagName)}const s=c(["audio","canvas","embed","iframe","img","math","object","picture","svg","video"]),p=function(t){if(null==t)return h;if("string"==typeof t)return function(t){return f(e);function e(e){return e&&e.type===t}}(t);if("object"==typeof t)return Array.isArray(t)?function(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=p(t[n]);return f(r);function r(...t){let n=-1;for(;++n<e.length;)if(e[n].call(this,...t))return!0;return!1}}(t):function(t){return f(e);function e(e){let n;for(n in t)if(e[n]!==t[n])return!1;return!0}}(t);if("function"==typeof t)return f(t);throw new Error("Expected function, string, or object as test")};function f(t){return function(e,...n){return Boolean(e&&"object"==typeof e&&"type"in e&&Boolean(t.call(this,e,...n)))}}function h(){return!0}const d=["address","article","aside","blockquote","body","br","caption","center","col","colgroup","dd","dialog","dir","div","dl","dt","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","legend","li","li","listing","main","menu","nav","ol","optgroup","option","p","plaintext","pre","section","summary","table","tbody","td","td","tfoot","th","th","thead","tr","ul","wbr","xmp"],g=["button","input","select","textarea"],y=["area","base","basefont","dialog","datalist","head","link","meta","noembed","noframes","param","rp","script","source","style","template","track","title"],m=p(["doctype","comment"]);function b(t={}){const e=function(t){return e;function e(e){return String(e).replace(/[\t\n\v\f\r ]+/g,t)}}(t.newlines?N:B);return t=>{x(t,{collapse:e,whitespace:"normal"})}}function x(t,e){if("children"in t){const n=Object.assign({},e);return("root"===t.type||S(t))&&(n.before=!0,n.after=!0),n.whitespace=function(t,e){if("tagName"in t&&t.properties)switch(t.tagName){case"listing":case"plaintext":case"script":case"style":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return t.properties.wrap?"pre-wrap":"pre";case"td":case"th":return t.properties.noWrap?"nowrap":e.whitespace;case"textarea":return"pre-wrap"}return e.whitespace}(t,e),function(t,e){let n=e.before;const r=e.after,o=t.children;let i=o.length,l=-1;for(;++l<i;){const t=x(o[l],Object.assign({},e,{before:n,after:w(o,l,r)}));t.remove?(o.splice(l,1),l--,i--):t.ignore||(n=t.stripAtStart),k(o[l])&&(n=!1)}return{remove:!1,ignore:!1,stripAtStart:Boolean(n||r)}}(t,n)}if("text"===t.type){if("normal"===e.whitespace)return function(t,e){const n=e.collapse(t.value),r={remove:!1,ignore:!1,stripAtStart:!1};let o=0,i=n.length;e.before&&j(n.charAt(0))&&o++;o!==i&&j(n.charAt(i-1))&&(e.after?i--:r.stripAtStart=!0);o===i?r.remove=!0:t.value=n.slice(o,i);return r}(t,e);"nowrap"===e.whitespace&&(t.value=e.collapse(t.value))}return{remove:!1,ignore:m(t),stripAtStart:!1}}function w(t,e,n){for(;++e<t.length;){const n=t[e];let r=v(n);if(void 0===r&&"children"in n&&!A(n)&&(r=w(n.children,-1)),"boolean"==typeof r)return r}return n}function v(t){if("element"===t.type){if(k(t))return!1;if(S(t))return!0}else if("text"===t.type){if(!function(t){const e=t&&"object"==typeof t&&"text"===t.type?t.value||"":t;return"string"==typeof e&&""===e.replace(/[ \t\n\f\r]/g,"")}(t))return!1}else if(!m(t))return!1}function k(t){return s(t)||l(t,g)}function S(t){return l(t,d)}function A(t){return Boolean("properties"in t&&t.properties&&t.properties.hidden)||m(t)||l(t,y)}function j(t){return" "===t||"\n"===t}function N(t){const e=/\r?\n|\r/.exec(t);return e?e[0]:" "}function B(){return" "}const E=function(t){if(null==t)return q;if("string"==typeof t)return function(t){return I(e);function e(e){return e&&e.type===t}}(t);if("object"==typeof t)return Array.isArray(t)?function(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=E(t[n]);return I(r);function r(...t){let n=-1;for(;++n<e.length;)if(e[n].call(this,...t))return!0;return!1}}(t):function(t){return I(e);function e(e){let n;for(n in t)if(e[n]!==t[n])return!1;return!0}}(t);if("function"==typeof t)return I(t);throw new Error("Expected function, string, or object as test")};function I(t){return function(e,...n){return Boolean(e&&"object"==typeof e&&"type"in e&&Boolean(t.call(this,e,...n)))}}function q(){return!0}function T(t,e){const n=e.children||[],r=[];let o=-1;for(;++o<n.length;){const i=U(t,n[o],e);Array.isArray(i)?r.push(...i):i&&r.push(i)}let i=0,l=r.length;for(;i<l&&"break"===r[i].type;)i++;for(;l>i&&"break"===r[l-1].type;)l--;return 0===i&&l===r.length?r:r.slice(i,l)}const C={}.hasOwnProperty;function O(t,e){return t.wrapText?e:e.replace(/\r?\n|\r/g," ")}function U(t,e,n){let r;if("element"===e.type){if(e.properties&&"ignore"===e.properties.dataMdast)return;C.call(t.handlers,e.tagName)&&(r=t.handlers[e.tagName])}else C.call(t.handlers,e.type)&&(r=t.handlers[e.type]);return"function"==typeof r?r(t,e,n):function(t,e){if("string"==typeof e.value)return t(e,"text",O(t,e.value));return T(t,e)}(t,e)}const P=function(t){if(null==t)return F;if("string"==typeof t)return function(t){return e;function e(e){return F(e)&&e.tagName===t}}(t);if("object"==typeof t)return function(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=P(t[n]);return z(r);function r(...t){let n=-1;for(;++n<e.length;)if(e[n].call(this,...t))return!0;return!1}}(t);if("function"==typeof t)return z(t);throw new Error("Expected function, string, or array as test")};function z(t){return function(e,...n){return F(e)&&Boolean(t.call(this,e,...n))}}function F(t){return Boolean(t&&"object"==typeof t&&"element"===t.type&&"string"==typeof t.tagName)}const R={}.hasOwnProperty;function M(t,e){const n="string"==typeof e&&function(t){return Boolean(t&&"object"==typeof t&&"type"in t)}(t)&&"element"===t.type&&t.properties&&R.call(t.properties,e)&&t.properties[e];return null!=n&&!1!==n}const W=P(["audio","canvas","embed","iframe","img","math","object","picture","svg","video"]),$=new Set(["pingback","prefetch","stylesheet"]);function H(t){if(!function(t,e,n,r,o){const i=P(e);return!(!t||!t.type||"string"!=typeof t.type)&&i.call(o,t,n,r)}(t,"link"))return!1;if(M(t,"itemProp"))return!0;const e=(t.properties||{}).rel||[];let n=-1;if(!Array.isArray(e)||0===e.length)return!1;for(;++n<e.length;)if(!$.has(String(e[n])))return!1;return!0}const L=P(["a","abbr","area","b","bdi","bdo","br","button","cite","code","data","datalist","del","dfn","em","i","input","ins","kbd","keygen","label","map","mark","meter","noscript","output","progress","q","ruby","s","samp","script","select","small","span","strong","sub","sup","template","textarea","time","u","var","wbr"]),V=P("meta");function Y(t){return D(t,(function(t){const e=t[0];if(1===t.length&&"text"===e.type&&(" "===e.value||"\n"===e.value))return[];return{type:"paragraph",children:t}}))}function _(t){let e,n=-1;for(;++n<t.length;)if(e=t[n],!J(e)||"children"in e&&_(e.children))return!0;return!1}function D(t,e,n){const r=n||K,o=function(t){let e,n=[],r=-1;for(;++r<t.length;)e=t[r],"delete"!==e.type&&"link"!==e.type||!_(e.children)?n.push(e):n=n.concat(G(e));return n}(t);let i,l,c=[],u=-1;for(;++u<o.length;)l=o[u],J(l)?(i||(i=[]),i.push(l)):(i&&(c=c.concat(e(i)),i=void 0),c=c.concat(r(l)));return i&&(c=c.concat(e(i))),c}function G(e){return D(e.children,(function(n){const{children:r,...o}=e;return{...t(!0,{},o),children:n}}),(function(n){if("children"in n&&"children"in e){const{children:r,...o}=e;return{...n,children:[{...t(!0,{},o),children:n.children}]}}return{...n}}))}function J(t){return t.data&&t.data.hName?(n={type:"element",tagName:t.data.hName,properties:{},children:[]},Boolean(function(t){return t&&"object"==typeof t&&"type"in t}(n)&&("text"===n.type||L(n)||W(n)||H(n)||V(n)&&M(n,"itemProp")))):e(t);var n}function K(t){return t}function Q(t,e){return Y(T(t,e))}function X(t,e){return null==e?"":t.frozenBaseUrl?String(new URL(e,t.frozenBaseUrl)):e}const Z=function(t){if(null==t)return et;if("string"==typeof t)return function(t){return e;function e(e){return et(e)&&e.tagName===t}}(t);if("object"==typeof t)return function(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Z(t[n]);return tt(r);function r(...t){let n=-1;for(;++n<e.length;)if(e[n].call(this,...t))return!0;return!1}}(t);if("function"==typeof t)return tt(t);throw new Error("Expected function, string, or array as test")};function tt(t){return function(e,...n){return et(e)&&Boolean(t.call(this,e,...n))}}function et(t){return Boolean(t&&"object"==typeof t&&"element"===t.type&&"string"==typeof t.tagName)}const nt=function(t){if(null==t)return ot;if("string"==typeof t)return function(t){return rt(e);function e(e){return e&&e.type===t}}(t);if("object"==typeof t)return Array.isArray(t)?function(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=nt(t[n]);return rt(r);function r(...t){let n=-1;for(;++n<e.length;)if(e[n].call(this,...t))return!0;return!1}}(t):function(t){return rt(e);function e(e){let n;for(n in t)if(e[n]!==t[n])return!1;return!0}}(t);if("function"==typeof t)return rt(t);throw new Error("Expected function, string, or object as test")};function rt(t){return function(e,...n){return Boolean(e&&"object"==typeof e&&"type"in e&&Boolean(t.call(this,e,...n)))}}function ot(){return!0}const it=function(t,e,n){const r=nt(n);if(!t||!t.type||!t.children)throw new Error("Expected parent node");if("number"==typeof e){if(e<0||e===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if((e=t.children.indexOf(e))<0)throw new Error("Expected child node or index");for(;++e<t.children.length;)if(r(t.children[e],e,t))return t.children[e];return null},lt=/\n/g,ct=/[\t ]+/g,ut=Z("br"),at=Z("p"),st=Z(["th","td"]),pt=Z("tr"),ft=Z(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",function(t){return Boolean((t.properties||{}).hidden)},function(t){return"dialog"===t.tagName&&!(t.properties||{}).open}]),ht=Z(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function dt(t,e={}){const n="children"in t?t.children:[],r=ht(t),o=bt(t,{whitespace:e.whitespace||"normal"}),i=[];"text"!==t.type&&"comment"!==t.type||i.push(...yt(t,{breakBefore:!0,breakAfter:!0}));let l=-1;for(;++l<n.length;)i.push(...gt(n[l],t,{whitespace:o,breakBefore:l?void 0:r,breakAfter:l<n.length-1?ut(n[l+1]):r}));const c=[];let u;for(l=-1;++l<i.length;){const t=i[l];"number"==typeof t?void 0!==u&&t>u&&(u=t):t&&(void 0!==u&&u>-1&&c.push("\n".repeat(u)||" "),u=-1,c.push(t))}return c.join("")}function gt(t,e,n){return"element"===t.type?function(t,e,n){const r=bt(t,n),o=t.children||[];let i,l,c=-1,u=[];if(ft(t))return u;ut(t)||pt(t)&&it(e,t,pt)?l="\n":at(t)?(i=2,l=2):ht(t)&&(i=1,l=1);for(;++c<o.length;)u=u.concat(gt(o[c],t,{whitespace:r,breakBefore:c?void 0:i,breakAfter:c<o.length-1?ut(o[c+1]):l}));st(t)&&it(e,t,st)&&u.push("\t");i&&u.unshift(i);l&&u.push(l);return u}(t,e,n):"text"===t.type?"normal"===n.whitespace?yt(t,n):function(t){return[String(t.value)]}(t):[]}function yt(t,e){const n=String(t.value),r=[],o=[];let i=0;for(;i<=n.length;){lt.lastIndex=i;const t=lt.exec(n),o=t&&"index"in t?t.index:n.length;r.push(mt(n.slice(i,o).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),0!==i||e.breakBefore,o!==n.length||e.breakAfter)),i=o+1}let l,c=-1;for(;++c<r.length;)8203===r[c].charCodeAt(r[c].length-1)||c<r.length-1&&8203===r[c+1].charCodeAt(0)?(o.push(r[c]),l=void 0):r[c]?("number"==typeof l&&o.push(l),o.push(r[c]),l=0):0!==c&&c!==r.length-1||o.push(0);return o}function mt(t,e,n){const r=[];let o,i=0;for(;i<t.length;){ct.lastIndex=i;const n=ct.exec(t);o=n?n.index:t.length,i||o||!n||e||r.push(""),i!==o&&r.push(t.slice(i,o)),i=n?o+n[0].length:o}return i===o||n||r.push(""),r.join(" ")}function bt(t,e){if("element"===t.type){const n=t.properties||{};switch(t.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":e.whitespace;case"textarea":return"pre-wrap"}}return e.whitespace}const xt="language-",wt=P("pre"),vt=P("code");function kt(t,e){const n=e.children;let r,o,i=-1;if(wt(e))for(;++i<n.length;){const t=n[i];if(vt(t)&&t.properties&&t.properties.className&&Array.isArray(t.properties.className)){r=t.properties.className;break}}if(r)for(i=-1;++i<r.length;)if(String(r[i]).slice(0,9)===xt){o=String(r[i]).slice(9);break}return t(e,"code",{lang:o||null,meta:null},function(t){const e=String(t);let n=e.length;for(;n>0;){const t=e.codePointAt(n-1);if(void 0===t||10!==t&&13!==t)break;n--}return e.slice(0,n)}(O(t,dt(e))))}function St(t,e){return t(e,"delete",T(t,e))}function At(t){let e=-1;if(t.length>1)for(;++e<t.length;)if(t[e].spread)return!0;return!1}function jt(t,e){const n=T(t,e);let r=-1;for(;++r<n.length;){const t=n[r];"listItem"!==t.type&&(n[r]={type:"listItem",spread:!1,checked:null,children:[t]})}return n}const Nt=P("div"),Bt=P("dt"),Et=P("dd");function It(t,e){const n=jt(t,{type:"element",tagName:"x",children:e});return 0===n.length?[]:1===n.length?n[0].children:[{type:"list",ordered:!1,start:null,spread:At(n),children:n}]}function qt(t,e){return t(e,"emphasis",T(t,e))}function Tt(t,e){const n=Number(e.tagName.charAt(1))||1,r=t.wrapText;t.wrapText=!1;const o=t(e,"heading",{depth:n},T(t,e));return t.wrapText=r,o}function Ct(t,e){const n=e.properties;return t(e,"image",{url:X(t,String(n.src||"")||null),title:n.title||null,alt:n.alt||""})}function Ot(t,e){return t(e,"inlineCode",O(t,dt(e)))}const Ut=P("option");function Pt(t,e,n){const r=n||e.properties;let o=zt(e);const i=Math.min(Number.parseInt(String(r.size),10),0)||(r.multiple?4:1);let l=-1;const c=[],u=[];for(;++l<o.length;)M(o[l],"selected")&&c.push(o[l]);for(o=(c.length>0?c:o).slice(0,i),l=-1;++l<o.length;){const e=o[l],n=O(t,dt(e)),r=e.properties,i=n||String(r.label||""),c=String(r.value||"")||n;u.push([c,i===c?null:i])}return u}function zt(t){const e=t.children;let n,r=-1,o=[];for(;++r<e.length;)n=e[r],Array.isArray(n.children)&&(o=o.concat(zt(n))),Ut(n)&&!M(n,"disabled")&&o.push(n);return o}const Ft=P("datalist");const Rt=P("p"),Mt=P("input");function Wt(t,e){const n=e.children[0];let r,o,i=null;Rt(n)&&(r=n.children[0],Mt(r)&&r.properties&&("checkbox"===r.properties.type||"radio"===r.properties.type)&&(i=Boolean(r.properties.checked),o={...e,children:[{...n,children:n.children.slice(1)},...e.children.slice(1)]}));const l=Q(t,o||e);return t(e,"listItem",{spread:l.length>1,checked:i},l)}const $t=P("ol");function Ht(t,e){const n=$t(e),r=jt(t,e);let o=null;return n&&(o=M(e,"start")?Number.parseInt(String(e.properties.start),10):1),t(e,"list",{ordered:n,start:o,spread:At(r)},r)}const Lt=P("source"),Vt=P("video");function Yt(t,e){let o=T(t,e);const l=e.properties,c=Vt(e)&&String(l.poster||"");let u,a=String(l.src||""),s=-1,p=!1;if(n({type:"root",children:o},"link",(function(){return p=!0,r})),p||_(o))return o;for(;!a&&++s<e.children.length;)u=e.children[s],Lt(u)&&(a=String(u.properties.src||""));return c&&(o=[{type:"image",title:null,url:X(t,c),alt:i({children:o})}]),{type:"link",title:e.properties.title||null,url:X(t,a),children:o}}function _t(t,e){const n=T(t,e);if(n.length>0)return t(e,"paragraph",n)}function Dt(t,e){return t(e,"strong",T(t,e))}function Gt(t,e){const n=t.wrapText;t.wrapText=!1;const r=t(e,"tableCell",T(t,e));if(e.properties&&(e.properties.rowSpan||e.properties.colSpan)){const t=r.data||(r.data={});e.properties.rowSpan&&(t.rowSpan=e.properties.rowSpan),e.properties.colSpan&&(t.colSpan=e.properties.colSpan)}return t.wrapText=n,r}const Jt=P("thead"),Kt=P("tr"),Qt=P(["th","td"]);function Xt(t){const e=[];let n,r,o=-1;for(;++o<t.length;)n=t[o],"tableCell"===n.type?(r&&(n.children.unshift(...r),r=void 0),e.push(n)):(r||(r=[]),r.push(n));return r&&(n=e[e.length-1],n||(n={type:"tableCell",children:[]},e.push(n)),n.children.push(...r)),e}const Zt={root:function(t,e){let n=T(t,e);return(t.document||_(n))&&(n=Y(n)),t(e,"root",n)},text:function(t,e){return t(e,"text",O(t,e.value))},comment:function(t,e){return t(e,"html","\x3c!--"+O(t,e.value)+"--\x3e")},doctype:te,applet:te,area:te,basefont:te,bgsound:te,caption:te,col:te,colgroup:te,command:te,content:te,datalist:te,dialog:te,element:te,embed:te,frame:te,frameset:te,isindex:te,keygen:te,link:te,math:te,menu:te,menuitem:te,meta:te,nextid:te,noembed:te,noframes:te,optgroup:te,option:te,param:te,script:te,shadow:te,source:te,spacer:te,style:te,svg:te,template:te,title:te,track:te,abbr:T,acronym:T,bdi:T,bdo:T,big:T,blink:T,button:T,canvas:T,cite:T,data:T,details:T,dfn:T,font:T,ins:T,label:T,map:T,marquee:T,meter:T,nobr:T,noscript:T,object:T,output:T,progress:T,rb:T,rbc:T,rp:T,rt:T,rtc:T,ruby:T,slot:T,small:T,span:T,sup:T,sub:T,tbody:T,tfoot:T,thead:T,time:T,address:Q,article:Q,aside:Q,body:Q,center:Q,div:Q,fieldset:Q,figcaption:Q,figure:Q,form:Q,footer:Q,header:Q,hgroup:Q,html:Q,legend:Q,main:Q,multicol:Q,nav:Q,picture:Q,section:Q,a:function(t,e){const n=e.properties;return t(e,"link",{title:n.title||null,url:X(t,String(n.href||"")||null)},T(t,e))},audio:Yt,b:Dt,base:function(t,e){t.baseFound||(t.frozenBaseUrl=String(e.properties&&e.properties.href||"")||null,t.baseFound=!0)},blockquote:function(t,e){return t(e,"blockquote",Q(t,e))},br:function(t,e){return t.wrapText?t(e,"break"):t(e,"text"," ")},code:Ot,dir:Ht,dl:function(t,e){const n=e.children;let r=-1,o=[];const i=[];let l,c,u={titles:[],definitions:[]};for(;++r<n.length;)l=n[r],o=o.concat(Nt(l)?l.children:l);for(r=-1;++r<o.length;)l=o[r],Bt(l)?(Et(o[r-1])&&(i.push(u),u={titles:[],definitions:[]}),u.titles.push(l)):u.definitions.push(l);i.push(u),r=-1;const a=[];for(;++r<i.length;)c=[...It(t,i[r].titles),...It(t,i[r].definitions)],c.length>0&&a.push({type:"listItem",spread:c.length>1,checked:null,children:c});if(a.length>0)return t(e,"list",{ordered:!1,start:null,spread:At(a)},a)},dt:Wt,dd:Wt,del:St,em:qt,h1:Tt,h2:Tt,h3:Tt,h4:Tt,h5:Tt,h6:Tt,hr:function(t,e){return t(e,"thematicBreak")},i:qt,iframe:function(t,e){const n=e.properties,r=String(n.src||""),o=String(n.title||"");if(r&&o)return{type:"link",title:null,url:X(t,r),children:[{type:"text",value:O(t,o)}]}},img:Ct,image:Ct,input:function(t,e){const n=e.properties;let r=String(n.value||n.placeholder||"");const o=[],i=[];let l,c=[],u=-1;if(!n.disabled&&"hidden"!==n.type&&"file"!==n.type){if("checkbox"===n.type||"radio"===n.type)return t(e,"text",O(t,t[n.checked?"checked":"unchecked"]));if("image"===n.type)return n.alt||r?t(e,"image",{url:X(t,String(n.src||"")||null),title:O(t,String(n.title||""))||null,alt:O(t,String(n.alt||r))}):[];if(r?c=[[r,null]]:"password"!==n.type&&"file"!==n.type&&"submit"!==n.type&&"reset"!==n.type&&"button"!==n.type&&n.list&&(l=String(n.list).toUpperCase(),C.call(t.nodeById,l)&&Ft(t.nodeById[l])&&(c=Pt(t,t.nodeById[l],n))),0!==c.length){if("password"===n.type&&(c[0]=["•".repeat(c[0][0].length),null]),"url"===n.type||"email"===n.type){for(;++u<c.length;)r=X(t,c[u][0]),o.push(t(e,"link",{title:null,url:O(t,"email"===n.type?"mailto:"+r:r)},[{type:"text",value:O(t,c[u][1]||r)}])),u!==c.length-1&&o.push({type:"text",value:", "});return o}for(;++u<c.length;)i.push(c[u][1]?c[u][1]+" ("+c[u][0]+")":c[u][0]);return t(e,"text",O(t,i.join(", ")))}}},kbd:Ot,li:Wt,listing:kt,mark:qt,ol:Ht,p:_t,plaintext:kt,pre:kt,q:function(t,e){const n=t.quotes[t.qNesting%t.quotes.length];t.qNesting++;const r=T(t,e);return t.qNesting--,r.unshift({type:"text",value:n.charAt(0)}),r.push({type:"text",value:n.length>1?n.charAt(1):n}),r},s:St,samp:Ot,select:function(t,e){const n=Pt(t,e);let r=-1;const o=[];let i;for(;++r<n.length;)i=n[r],o.push(i[1]?i[1]+" ("+i[0]+")":i[0]);if(o.length>0)return t(e,"text",O(t,o.join(", ")))},strike:St,strong:Dt,summary:_t,table:function(t,e){if(t.inTable)return t(e,"text",O(t,dt(e)));t.inTable=!0;const{headless:r,align:i}=function(t){let e=!0,r=0,i=0;const l=[null];return n(t,"element",(n=>{if("table"===n.tagName&&t!==n)return o;Qt(n)&&n.properties?(l[i]||(l[i]=String(n.properties.align||"")||null),e&&r<2&&"th"===n.tagName&&(e=!1),i++):Jt(n)?e=!1:Kt(n)&&(r++,i=0)})),{align:l,headless:e}}(e),l=function(t,e){let n=-1;const r=[];let o;e&&r.push({type:"tableRow",children:[]});for(;++n<t.length;){const e=t[n];"tableRow"===e.type?(o&&(e.children.unshift(...o),o=void 0),r.push(e)):(o||(o=[]),o.push(e))}o&&r[r.length-1].children.push(...o);n=-1;for(;++n<r.length;)r[n].children=Xt(r[n].children);return r}(T(t,e),r);let c=1,u=-1;for(;++u<l.length;){const t=l[u].children;let e=-1;for(;++e<t.length;){const n=t[e];if(n.data){const t=Number.parseInt(String(n.data.colSpan),10)||1,r=Number.parseInt(String(n.data.rowSpan),10)||1;if(t>1||r>1){let n=u-1;for(;++n<u+r;){let r=e-1;for(;++r<e+t&&l[n];){const t=[];n===u&&r===e||t.push({type:"tableCell",children:[]}),l[n].children.splice(r,0,...t)}}}"colSpan"in n.data&&delete n.data.colSpan,"rowSpan"in n.data&&delete n.data.rowSpan,0===Object.keys(n.data).length&&delete n.data}}t.length>c&&(c=t.length)}for(u=-1;++u<l.length;){const t=l[u].children;let e=t.length-1;for(;++e<c;)t.push({type:"tableCell",children:[]})}let a=i.length-1;for(;++a<c;)i.push(null);return t.inTable=!1,t(e,"table",{align:i},l)},td:Gt,textarea:function(t,e){return t(e,"text",O(t,dt(e)))},th:Gt,tr:function(t,e){return t(e,"tableRow",T(t,e))},tt:Ot,u:qt,ul:Ht,var:Ot,video:Yt,wbr:function(t,e){return t(e,"text","​")},xmp:kt};function te(){}const ee=E(["heading","paragraph","root"]);function ne(t,e={}){const r={};let o;const i=Object.assign(((t,e,n,r)=>{let o;"string"==typeof n||Array.isArray(n)?(r=n,o={}):o=n;const i={type:e,...o};return"string"==typeof r?i.value=r:r&&(i.children=r),t.position&&(i.position=t.position),i}),{nodeById:r,baseFound:!1,inTable:!1,wrapText:!0,frozenBaseUrl:null,qNesting:0,handlers:e.handlers?{...Zt,...e.handlers}:Zt,document:e.document,checked:e.checked||"[x]",unchecked:e.unchecked||"[ ]",quotes:e.quotes||['"']});n(t,"element",(t=>{const e=t.properties&&"id"in t.properties&&String(t.properties.id).toUpperCase();e&&!C.call(r,e)&&(r[e]=t)})),b({newlines:!0===e.newlines})(t);const l=U(i,t,void 0);return o=l?Array.isArray(l)?{type:"root",children:l}:l:{type:"root",children:[]},n(o,"text",(function(t,e,n){if(null===e||!n)return;const r=n.children[e-1];if(r&&r.type===t.type)return r.value+=t.value,n.children.splice(e,1),r.position&&t.position&&(r.position.end=t.position.end),e-1;t.value=t.value.replace(/[\t ]*(\r?\n|\r)[\t ]*/,"$1"),n&&ee(n)&&(e||(t.value=t.value.replace(/^[\t ]+/,"")),e===n.children.length-1&&(t.value=t.value.replace(/[\t ]+$/,"")));if(!t.value)return n.children.splice(e,1),e})),o}const re=function(t,e){let n,r;return"function"==typeof t?(r=t,n=e||{}):n=t||{},void 0!==n.document&&null!==n.document||(n=Object.assign({},n,{document:!0})),r?function(t,e){return(n,r,o)=>{t.run(ne(n,e),r,(t=>{o(t)}))}}(r,n):function(t={}){return e=>ne(e,t)}(n)};export{T as all,re as default,Zt as defaultHandlers,U as one};
