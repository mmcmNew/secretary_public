import{c as e}from"./index-CWWusv4C.js";import{w as t}from"./index-DlJMGLAz.js";const r=function(e,t,r,o,a){const c=n(t);return!!i(e)&&c.call(a,e,r,o)},n=function(e){if(null==e)return a;if("string"==typeof e)return function(e){return o(t);function t(t){return t.tagName===e}}(e);if("object"==typeof e)return function(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=n(e[r]);return o(a);function a(...e){let r=-1;for(;++r<t.length;)if(t[r].apply(this,e))return!0;return!1}}(e);if("function"==typeof e)return o(e);throw new Error("Expected function, string, or array as `test`")};function o(e){return function(t,r,n){return Boolean(i(t)&&e.call(this,t,"number"==typeof r?r:void 0,n||void 0))}}function a(e){return Boolean(e&&"object"==typeof e&&"type"in e&&"element"===e.type&&"tagName"in e&&"string"==typeof e.tagName)}function i(e){return null!==e&&"object"==typeof e&&"type"in e&&"tagName"in e}const c=n((function(e){return"audio"===e.tagName||"canvas"===e.tagName||"embed"===e.tagName||"iframe"===e.tagName||"img"===e.tagName||"math"===e.tagName||"object"===e.tagName||"picture"===e.tagName||"svg"===e.tagName||"video"===e.tagName})),u=["address","article","aside","blockquote","body","br","caption","center","col","colgroup","dd","dialog","dir","div","dl","dt","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","legend","li","li","listing","main","menu","nav","ol","optgroup","option","p","plaintext","pre","section","summary","table","tbody","td","td","tfoot","th","th","thead","tr","ul","wbr","xmp"],p=["button","input","select","textarea"],s=["area","base","basefont","dialog","datalist","head","link","meta","noembed","noframes","param","rp","script","source","style","template","track","title"],l={},f=e(["comment","doctype"]);function m(e,t){g(e,{collapse:A((t||l).newlines?N:x),whitespace:"normal"})}function g(e,t){if("children"in e){const r={...t};return("root"===e.type||y(e))&&(r.before=!0,r.after=!0),r.whitespace=function(e,t){if("tagName"in e&&e.properties)switch(e.tagName){case"listing":case"plaintext":case"script":case"style":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return e.properties.wrap?"pre-wrap":"pre";case"td":case"th":return e.properties.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}return t.whitespace}(e,t),function(e,t){let r=t.before;const n=t.after,o=e.children;let a=o.length,i=-1;for(;++i<a;){const e=g(o[i],{...t,after:d(o,i,n),before:r});e.remove?(o.splice(i,1),i--,a--):e.ignore||(r=e.stripAtStart),b(o[i])&&(r=!1)}return{ignore:!1,stripAtStart:Boolean(r||n),remove:!1}}(e,r)}if("text"===e.type){if("normal"===t.whitespace)return function(e,t){const r=t.collapse(e.value),n={ignore:!1,stripAtStart:!1,remove:!1};let o=0,a=r.length;t.before&&v(r.charAt(0))&&o++;o!==a&&v(r.charAt(a-1))&&(t.after?a--:n.stripAtStart=!0);o===a?n.remove=!0:e.value=r.slice(o,a);return n}(e,t);"nowrap"===t.whitespace&&(e.value=t.collapse(e.value))}return{ignore:f(e),stripAtStart:!1,remove:!1}}function d(e,t,r){for(;++t<e.length;){const r=e[t];let n=h(r);if(void 0===n&&"children"in r&&!w(r)&&(n=d(r.children,-1)),"boolean"==typeof n)return n}return r}function h(e){if("element"===e.type){if(b(e))return!1;if(y(e))return!0}else if("text"===e.type){if(!t(e))return!1}else if(!f(e))return!1}function b(e){return c(e)||r(e,p)}function y(e){return r(e,u)}function w(e){return Boolean("element"===e.type&&e.properties.hidden)||f(e)||r(e,s)}function v(e){return" "===e||"\n"===e}function N(e){const t=/\r?\n|\r/.exec(e);return t?t[0]:" "}function x(){return" "}function A(e){return function(t){return String(t).replace(/[\t\n\v\f\r ]+/g,e)}}const k={}.hasOwnProperty;const S=new Set(["pingback","prefetch","stylesheet"]);const j=n(["a","abbr","area","b","bdi","bdo","br","button","cite","code","data","datalist","del","dfn","em","i","input","ins","kbd","keygen","label","map","mark","meter","noscript","output","progress","q","ruby","s","samp","script","select","small","span","strong","sub","sup","template","textarea","time","u","var","wbr"]),B=n("meta");function P(e){return Boolean("text"===e.type||j(e)||c(e)||function(e){if("element"!==e.type||"link"!==e.tagName)return!1;if(e.properties.itemProp)return!0;const t=e.properties.rel;let r=-1;if(!Array.isArray(t)||0===t.length)return!1;for(;++r<t.length;)if(!S.has(String(t[r])))return!1;return!0}(e)||B(e)&&function(e,t){const r="element"===e.type&&k.call(e.properties,t)&&e.properties[t];return null!=r&&!1!==r}(e,"itemProp"))}export{n as c,c as e,m,P as p};
